<style>
  .contact-form {
    margin-top: 3rem;
  }
  .dsgvo-checkbox {
    margin: 1rem 0;
    display: flex;
    align-items: center;
  }
  .dsgvo-checkbox input {
    margin-right: 0.5rem;
  }
  .dsgvo-checkbox a {
    color: #0073e6;
    text-decoration: underline;
    font-weight: bold;
  }
  .field {
    margin-bottom: 1.5rem;
  }
  .field-input, .text-area {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  @media (max-width: 768px) {
    .field-label {
      font-size: 0.9rem;
    }
  }
</style>

<div class="container container-narrow block-section">
  {% if page.title != blank %}
    <h1 class="page-title">{{ page.title }}</h1>
  {% endif %}

  {% if page.content != blank %}
    <div class="page-content">
      {{ page.content }}
    </div>
  {% endif %}

  <div class="contact-form section-{{ section.id }}">
    {%- form 'contact', id: 'ReturnForm', class: 'isolate' -%}
      {%- if form.posted_successfully? -%}
        <div class="form-status form-status-success" tabindex="-1" autofocus>
          Vielen Dank! Ihr Rücksendeantrag wurde erfolgreich übermittelt.
        </div>
      {%- elsif form.errors -%}
        <div class="form-status form-status-error" role="alert" tabindex="-1" autofocus>
          <h5 class="form-status-title">{{ 'general.form.error_heading' | t }}</h5>
          <ul class="form-status-list" role="list">
            <li>
              <a href="#ReturnForm-email" class="link">
                {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
              </a>
            </li>
          </ul>
        </div>
      {%- endif -%}

      <div class="field">
        <label class="field-label" for="ReturnForm-name">Ihr Name</label>
        <input class="field-input" type="text" id="ReturnForm-name" name="contact[name]" placeholder="Max Mustermann" required>
      </div>

      <div class="field">
        <label class="field-label" for="ReturnForm-email">Ihre E-Mail-Adresse <span aria-hidden="true">*</span></label>
        <input class="field-input" type="email" id="ReturnForm-email" name="contact[email]" placeholder="beispiel@domain.de" required>
      </div>

      <div class="field">
        <label class="field-label" for="ReturnForm-order-number">Bestellnummer <span aria-hidden="true">*</span></label>
        <input class="field-input" type="text" id="ReturnForm-order-number" name="contact[order_number]" placeholder="123456" required>
      </div>

      <div class="field">
        <label class="field-label" for="ReturnForm-reason">Rücksende- oder Reklamationsgrund</label>
        <select id="ReturnForm-reason" class="field-input" name="contact[reason]">
          <option value="" disabled selected>Wählen Sie einen Grund</option>
          <option value="Artikel defekt">Artikel defekt</option>
          <option value="Artikel wird nicht benötigt">Artikel wird nicht benötigt</option>
          <option value="Doppellieferung">Doppellieferung</option>
          <option value="Falscher Artikel">Falscher Artikel</option>
          <option value="Falsches Folienmaß">Falsches Folienmaß</option>
          <option value="Fehlender Artikel">Fehlender Artikel</option>
          <option value="Folie beschädigt">Folie beschädigt</option>
          <option value="Kleber ausgelaufen">Kleber ausgelaufen</option>
          <option value="Schaden durch Spedition">Schaden durch Spedition</option>
          <option value="Verarbeitungsfehler">Verarbeitungsfehler</option>
          <option value="Sonstiges">Sonstiges</option>
        </select>
      </div>

      <div class="field">
        <label class="field-label" for="ReturnForm-comment">Zusätzliche Informationen</label>
        <textarea id="ReturnForm-comment" class="text-area field-input" name="contact[comment]" rows="5" placeholder="Beschreiben Sie hier Ihr Anliegen..."></textarea>
      </div>

      <div class="field">
        <label class="field-label" for="ReturnForm-file">Datei anhängen (bis zu 10 MB)</label>
        <input type="file" id="ReturnForm-file" name="contact[file]" accept=".jpg,.png,.pdf,.docx">
      </div>

      <div class="dsgvo-checkbox">
        <input type="checkbox" id="gdpr-consent" name="gdpr-consent" required>
        <label for="gdpr-consent">
          Ich habe die <a href="/policies/privacy-policy" target="_blank">Datenschutzbestimmungen</a> zur Kenntnis genommen und akzeptiere die <a href="/pages/agb" target="_blank">AGB</a>.
        </label>
      </div>

      <div class="contact-button">
        <button type="submit" class="button" onclick="return validateForm()">Absenden</button>
      </div>
    {%- endform -%}
  </div>
</div>

<script>
  function validateForm() {
    const fileInput = document.getElementById('ReturnForm-file');
    if (fileInput.files.length > 0) {
      const fileSize = fileInput.files[0].size / 1024 / 1024;
      if (fileSize > 10) {
        alert("Die Datei darf nicht größer als 10 MB sein.");
        return false;
      }
    }
    return true;
  }
</script>

{% schema %}
{
  "name": "Rücksendeformular",
  "settings": [],
  "presets": [
    {
      "name": "Rücksendeformular",
      "category": "Kontakt"
    }
  ]
}
{% endschema %}
